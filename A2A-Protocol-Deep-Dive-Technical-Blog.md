# A2Aåè®®æ·±åº¦è§£æï¼šæ„å»ºæ™ºèƒ½Agenté€šä¿¡çš„æ ‡å‡†åŒ–æ¡¥æ¢

## ğŸŒŸ å¼•è¨€

åœ¨äººå·¥æ™ºèƒ½å¿«é€Ÿå‘å±•çš„ä»Šå¤©ï¼ŒAgent-to-Agentï¼ˆA2Aï¼‰é€šä¿¡åè®®æ­£æˆä¸ºæ„å»ºåˆ†å¸ƒå¼AIç³»ç»Ÿçš„å…³é”®æŠ€æœ¯ã€‚æœ¬æ–‡å°†æ·±å…¥è§£æA2Aåè®®çš„ç¬¬ä¸€éƒ¨åˆ†å®ç°â€”â€”å¤©æ°”æŸ¥è¯¢Agentï¼Œé€šè¿‡å®é™…ä»£ç å’Œæ¶æ„åˆ†æï¼Œå¸¦ä½ ç†è§£ç°ä»£AI Agenté€šä¿¡çš„æ ¸å¿ƒæœºåˆ¶ã€‚

## ğŸ¯ ä»€ä¹ˆæ˜¯A2Aåè®®ï¼Ÿ

A2Aï¼ˆAgent-to-Agentï¼‰åè®®æ˜¯ä¸€ç§æ ‡å‡†åŒ–çš„Agenté—´é€šä¿¡åè®®ï¼Œå®ƒå®šä¹‰äº†ï¼š
- **ç»Ÿä¸€çš„æ¶ˆæ¯æ ¼å¼**ï¼šåŸºäºJSON-RPC 2.0æ ‡å‡†
- **æ ‡å‡†åŒ–çš„èƒ½åŠ›æè¿°**ï¼šé€šè¿‡AgentCardå£°æ˜Agentçš„æŠ€èƒ½å’Œç‰¹æ€§
- **å¼‚æ­¥ä»»åŠ¡å¤„ç†**ï¼šæ”¯æŒé•¿æ—¶é—´è¿è¡Œçš„AIä»»åŠ¡
- **å¤šæ¨¡æ€äº¤äº’**ï¼šæ”¯æŒæ–‡æœ¬ã€å›¾åƒç­‰å¤šç§è¾“å…¥è¾“å‡ºæ¨¡å¼

## ğŸ—ï¸ é¡¹ç›®æ¶æ„æ·±åº¦è§£æ

### æ ¸å¿ƒæŠ€æœ¯æ ˆ

```toml
[project]
name = "weather"
version = "0.1.0"
requires-python = ">=3.13"
dependencies = [
    "a2a-sdk>=0.3.0",    # A2Aåè®®SDK
    "uvicorn>=0.34.2",   # ASGIæœåŠ¡å™¨
]
```

### æ¶æ„ç»„ä»¶åˆ†æ

#### 1. åº”ç”¨å±‚ï¼šA2AStarletteApplication

```python
from a2a.server.apps import A2AStarletteApplication

server = A2AStarletteApplication(
    agent_card=agent_card, 
    http_handler=request_handler
)
```

**ä»€ä¹ˆæ˜¯A2AStarletteApplicationï¼Ÿ**

A2AStarletteApplicationæ˜¯A2Aåè®®SDKæä¾›çš„æ ¸å¿ƒåº”ç”¨ç±»ï¼Œå®ƒæ˜¯æ„å»ºA2A AgentæœåŠ¡çš„åŸºç¡€æ¡†æ¶ã€‚è®©æˆ‘ä»¬æ·±å…¥äº†è§£å…¶æŠ€æœ¯èƒŒæ™¯ï¼š

**Starletteæ¡†æ¶ç§‘æ™®**ï¼š
- **è½»é‡çº§ASGIæ¡†æ¶**ï¼šStarletteæ˜¯ä¸€ä¸ªç°ä»£çš„Python Webæ¡†æ¶ï¼Œä¸“ä¸ºå¼‚æ­¥åº”ç”¨è®¾è®¡
- **é«˜æ€§èƒ½**ï¼šåŸºäºASGIï¼ˆAsynchronous Server Gateway Interfaceï¼‰æ ‡å‡†ï¼Œæ”¯æŒå¼‚æ­¥I/Oæ“ä½œ
- **çµæ´»æ€§**ï¼šæä¾›äº†è·¯ç”±ã€ä¸­é—´ä»¶ã€WebSocketç­‰æ ¸å¿ƒWebåŠŸèƒ½ï¼Œä½†ä¿æŒè½»é‡çº§

**ASGI vs WSGI**ï¼š
- **WSGIï¼ˆåŒæ­¥ï¼‰**ï¼šä¼ ç»Ÿçš„Python Webæ ‡å‡†ï¼Œæ¯ä¸ªè¯·æ±‚é˜»å¡ä¸€ä¸ªçº¿ç¨‹
- **ASGIï¼ˆå¼‚æ­¥ï¼‰**ï¼šç°ä»£æ ‡å‡†ï¼Œæ”¯æŒå¼‚æ­¥å¤„ç†ã€WebSocketã€HTTP/2ç­‰ç‰¹æ€§
- **æ€§èƒ½ä¼˜åŠ¿**ï¼šASGIåº”ç”¨å¯ä»¥åŒæ—¶å¤„ç†æ•°åƒä¸ªå¹¶å‘è¿æ¥

**A2AStarletteApplicationçš„æ ¸å¿ƒä»·å€¼**ï¼š
- **åè®®å°è£…**ï¼šè‡ªåŠ¨å¤„ç†A2Aåè®®çš„å¤æ‚ç»†èŠ‚ï¼ˆJSON-RPC 2.0ã€æ¶ˆæ¯è·¯ç”±ç­‰ï¼‰
- **æ ‡å‡†åŒ–æ¥å£**ï¼šæä¾›ç»Ÿä¸€çš„HTTPç«¯ç‚¹ï¼Œå…¶ä»–Agentå¯ä»¥é€šè¿‡æ ‡å‡†æ–¹å¼è°ƒç”¨
- **å¼‚æ­¥æ”¯æŒ**ï¼šå¤©ç„¶æ”¯æŒAIæ¨ç†ç­‰è€—æ—¶æ“ä½œçš„å¼‚æ­¥å¤„ç†
- **å¼€ç®±å³ç”¨**ï¼šå¼€å‘è€…åªéœ€å…³æ³¨ä¸šåŠ¡é€»è¾‘ï¼Œæ— éœ€å¤„ç†åº•å±‚é€šä¿¡ç»†èŠ‚

**æŠ€æœ¯ç‰¹ç‚¹**ï¼š
- åŸºäºStarletteæ¡†æ¶çš„ASGIåº”ç”¨
- æä¾›æ ‡å‡†åŒ–çš„HTTPæ¥å£
- è‡ªåŠ¨å¤„ç†A2Aåè®®çš„åºåˆ—åŒ–/ååºåˆ—åŒ–
- å†…ç½®è·¯ç”±ç®¡ç†å’Œé”™è¯¯å¤„ç†
- æ”¯æŒä¸­é—´ä»¶æ‰©å±•å’Œè‡ªå®šä¹‰é…ç½®

**æ·±åº¦æ¶æ„è§£æ**ï¼š

**1. åˆ†å±‚æ¶æ„è®¾è®¡**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           A2AStarletteApplication        â”‚  â† ASGI WebæœåŠ¡å±‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              HTTPè·¯ç”±å±‚                  â”‚  â† è¯·æ±‚è·¯ç”±å’Œä¸­é—´ä»¶
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           DefaultRequestHandler          â”‚  â† åè®®å¤„ç†å±‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚             AgentExecutor               â”‚  â† ä¸šåŠ¡é€»è¾‘å±‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    TaskStore + EventQueue + AgentCard   â”‚  â† åŸºç¡€è®¾æ–½å±‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**2. æ ¸å¿ƒèŒè´£åˆ†å·¥**
- **A2AStarletteApplication**ï¼šä½œä¸ºASGI WebæœåŠ¡å™¨ï¼Œè´Ÿè´£HTTPåè®®å¤„ç†ã€è·¯ç”±åˆ†å‘ã€ä¸­é—´ä»¶ç®¡ç†
- **DefaultRequestHandler**ï¼šä¸“æ³¨äºA2Aåè®®çš„JSON-RPCå¤„ç†ã€ä»»åŠ¡ç®¡ç†ã€çŠ¶æ€è·Ÿè¸ª
- **AgentExecutor**ï¼šçº¯ç²¹çš„ä¸šåŠ¡é€»è¾‘å¤„ç†ï¼Œä¸å…³å¿ƒåè®®ç»†èŠ‚
- **AgentCard**ï¼šAgentèº«ä»½å’Œèƒ½åŠ›çš„å£°æ˜å¼æè¿°

**3. è¯·æ±‚å¤„ç†å®Œæ•´æµç¨‹**
```
å®¢æˆ·ç«¯è¯·æ±‚ â†’ A2AStarletteApplication â†’ DefaultRequestHandler â†’ AgentExecutor
     â†‘                    â†“                      â†“               â†“
 JSON-RPCå“åº” â†â”€â”€â”€ HTTPå“åº”å°è£… â†â”€â”€â”€ ä»»åŠ¡çŠ¶æ€ç®¡ç† â†â”€â”€â”€ ä¸šåŠ¡é€»è¾‘æ‰§è¡Œ
```

**4. ä¸DefaultRequestHandlerçš„åä½œå…³ç³»**

**èŒè´£è¾¹ç•Œ**ï¼š
- **A2AStarletteApplication**ï¼š
  - HTTPæœåŠ¡å™¨åŠŸèƒ½ï¼ˆç«¯å£ç›‘å¬ã€è¿æ¥ç®¡ç†ï¼‰
  - è·¯ç”±ç®¡ç†ï¼ˆå°†è¯·æ±‚åˆ†å‘åˆ°æ­£ç¡®çš„å¤„ç†å™¨ï¼‰
  - ä¸­é—´ä»¶æ”¯æŒï¼ˆè®¤è¯ã€æ—¥å¿—ã€CORSç­‰ï¼‰
  - Agentèº«ä»½ç®¡ç†ï¼ˆé€šè¿‡AgentCardæš´éœ²Agentä¿¡æ¯ï¼‰
  - ASGIç”Ÿå‘½å‘¨æœŸç®¡ç†

- **DefaultRequestHandler**ï¼š
  - JSON-RPCåè®®è§£æå’ŒéªŒè¯
  - ä»»åŠ¡åˆ›å»ºå’ŒçŠ¶æ€ç®¡ç†
  - ä¸šåŠ¡é€»è¾‘æ‰§è¡Œåè°ƒ
  - å“åº”æ ¼å¼åŒ–å’Œé”™è¯¯å¤„ç†
  - å¼‚æ­¥ä»»åŠ¡æ”¯æŒ

**åä½œæ¨¡å¼**ï¼š
```python
# A2AStarletteApplication åˆå§‹åŒ–æ—¶æ³¨å…¥ DefaultRequestHandler
server = A2AStarletteApplication(
    agent_card=agent_card,           # Agentèº«ä»½å£°æ˜
    http_handler=request_handler     # åè®®å¤„ç†å§”æ‰˜
)

# è¿è¡Œæ—¶åä½œæµç¨‹ï¼š
# 1. A2AStarletteApplication æ¥æ”¶HTTPè¯·æ±‚
# 2. æ ¹æ®è·¯ç”±è§„åˆ™å§”æ‰˜ç»™ DefaultRequestHandler
# 3. DefaultRequestHandler å¤„ç†A2Aåè®®ç»†èŠ‚
# 4. è°ƒç”¨ AgentExecutor æ‰§è¡Œä¸šåŠ¡é€»è¾‘
# 5. ç»“æœå±‚å±‚è¿”å›ï¼Œæœ€ç»ˆç”± A2AStarletteApplication å‘é€HTTPå“åº”
```

**5. è®¾è®¡ä¼˜åŠ¿æ€»ç»“**
- **å•ä¸€èŒè´£**ï¼šæ¯ä¸ªç»„ä»¶éƒ½æœ‰æ˜ç¡®çš„èŒè´£è¾¹ç•Œ
- **æ¾è€¦åˆ**ï¼šç»„ä»¶é—´é€šè¿‡æ¥å£äº¤äº’ï¼Œä¾¿äºæµ‹è¯•å’Œæ›¿æ¢
- **å¯æ‰©å±•æ€§**ï¼šå¯ä»¥è½»æ¾æ›¿æ¢ä»»ä½•å±‚çš„å®ç°
- **æ ‡å‡†åŒ–**ï¼šå®Œå…¨ç¬¦åˆA2Aåè®®è§„èŒƒ
- **é«˜æ€§èƒ½**ï¼šå¼‚æ­¥æ¶æ„æ”¯æŒé«˜å¹¶å‘å¤„ç†

#### 2. Agentèº«ä»½å¡ï¼šAgentCard

```python
agent_card = AgentCard(
    name='å¤©æ°” Agent',
    description='æä¾›å¤©æ°”ç›¸å…³çš„æŸ¥è¯¢åŠŸèƒ½',
    url=f'http://{host}:{port}',
    version='1.0.0',
    defaultInputModes=['text'],
    defaultOutputModes=['text'],
    capabilities=capabilities,
    skills=[forecast_skill, air_quality_skill],
)
```

**ä»€ä¹ˆæ˜¯AgentCardï¼Ÿ**

AgentCardï¼ˆAgentèº«ä»½å¡ï¼‰æ˜¯A2Aåè®®ä¸­çš„æ ¸å¿ƒæ¦‚å¿µï¼Œå¯ä»¥ç†è§£ä¸ºAgentçš„"èº«ä»½è¯"æˆ–"åç‰‡"ã€‚å®ƒé‡‡ç”¨äº†ç±»ä¼¼äºå¾®æœåŠ¡æ¶æ„ä¸­æœåŠ¡æ³¨å†Œä¸å‘ç°çš„è®¾è®¡ç†å¿µï¼Œè®©Agentèƒ½å¤Ÿåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­è‡ªæˆ‘æè¿°å’Œè¢«å‘ç°ã€‚

**æ ¸å¿ƒæ¦‚å¿µè§£æ**ï¼š

**1. è‡ªæè¿°æ¶æ„ï¼ˆSelf-Describing Architectureï¼‰**
- **æœåŠ¡å‘ç°**ï¼šç±»ä¼¼äºKubernetesä¸­çš„Serviceï¼ŒAgentCardè®©å…¶ä»–Agentèƒ½å¤Ÿå‘ç°å¹¶äº†è§£å½“å‰Agentçš„èƒ½åŠ›
- **å¥‘çº¦å®šä¹‰**ï¼šæ˜ç¡®å®šä¹‰äº†Agentæä¾›çš„æœåŠ¡æ¥å£å’Œèƒ½åŠ›è¾¹ç•Œ
- **åŠ¨æ€æ³¨å†Œ**ï¼šAgentå¯åŠ¨æ—¶å¯ä»¥å°†è‡ªå·±çš„AgentCardæ³¨å†Œåˆ°æœåŠ¡æ³¨å†Œä¸­å¿ƒ

**2. å­—æ®µè¯¦è§£**ï¼š
- **name & description**ï¼šAgentçš„æ ‡è¯†å’ŒåŠŸèƒ½æè¿°ï¼Œç”¨äºäººç±»ç†è§£å’ŒAgentæ£€ç´¢
- **url**ï¼šAgentçš„æœåŠ¡ç«¯ç‚¹ï¼Œå…¶ä»–Agenté€šè¿‡æ­¤URLè¿›è¡Œé€šä¿¡
- **version**ï¼šç‰ˆæœ¬æ§åˆ¶ï¼Œæ”¯æŒAPIå…¼å®¹æ€§ç®¡ç†å’Œç°åº¦å‘å¸ƒ
- **defaultInputModes/OutputModes**ï¼šæ”¯æŒçš„è¾“å…¥è¾“å‡ºæ¨¡å¼ï¼ˆæ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ç­‰ï¼‰
- **capabilities**ï¼šAgentçš„é€šç”¨èƒ½åŠ›å£°æ˜
- **skills**ï¼šå…·ä½“çš„æŠ€èƒ½åˆ—è¡¨ï¼Œæ¯ä¸ªæŠ€èƒ½éƒ½æœ‰è¯¦ç»†çš„æè¿°å’Œç¤ºä¾‹

**3. è®¾è®¡æ¨¡å¼å¯¹æ¯”**ï¼š

| æ¦‚å¿µ | ä¼ ç»Ÿå¾®æœåŠ¡ | A2A Agent |
|------|------------|----------|
| æœåŠ¡å‘ç° | Eureka/Consul | AgentCard |
| APIæ–‡æ¡£ | OpenAPI/Swagger | Skills + Examples |
| å¥åº·æ£€æŸ¥ | /healthç«¯ç‚¹ | AgentçŠ¶æ€ |
| è´Ÿè½½å‡è¡¡ | æœåŠ¡ç½‘æ ¼ | Agentè·¯ç”± |

**4. å®é™…åº”ç”¨ä»·å€¼**ï¼š
- **æ™ºèƒ½è·¯ç”±**ï¼šæ ¹æ®æŠ€èƒ½åŒ¹é…è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„Agent
- **èƒ½åŠ›ç»„åˆ**ï¼šåŠ¨æ€ç»„åˆå¤šä¸ªAgentçš„èƒ½åŠ›å®Œæˆå¤æ‚ä»»åŠ¡
- **ç‰ˆæœ¬ç®¡ç†**ï¼šæ”¯æŒAgentçš„å¹³æ»‘å‡çº§å’Œå›æ»š
- **ç›‘æ§è¿ç»´**ï¼šç»Ÿä¸€çš„AgentçŠ¶æ€ç®¡ç†å’Œç›‘æ§

**è®¾è®¡äº®ç‚¹**ï¼š
- **è‡ªæè¿°æ€§**ï¼šAgentèƒ½å¤Ÿå£°æ˜è‡ªå·±çš„èƒ½åŠ›å’ŒæŠ€èƒ½
- **ç‰ˆæœ¬ç®¡ç†**ï¼šæ”¯æŒAgentçš„ç‰ˆæœ¬æ§åˆ¶å’Œå…¼å®¹æ€§
- **å¤šæ¨¡æ€æ”¯æŒ**ï¼šçµæ´»çš„è¾“å…¥è¾“å‡ºæ¨¡å¼é…ç½®
- **æ ‡å‡†åŒ–æ¥å£**ï¼šç»Ÿä¸€çš„Agentæè¿°æ ¼å¼ï¼Œä¾¿äºç”Ÿæ€å»ºè®¾
- **åŠ¨æ€å‘ç°**ï¼šæ”¯æŒè¿è¡Œæ—¶çš„Agentå‘ç°å’Œèƒ½åŠ›æŸ¥è¯¢

#### 3. æŠ€èƒ½å®šä¹‰ï¼šAgentSkill

```python
forecast_skill = AgentSkill(
    id='å¤©æ°”é¢„å‘Š',
    name='å¤©æ°”é¢„å‘Š',
    description='ç»™å‡ºæŸåœ°çš„å¤©æ°”é¢„å‘Š',
    tags=['å¤©æ°”', 'é¢„å‘Š'],
    examples=['ç»™æˆ‘çº½çº¦æœªæ¥ 7 å¤©çš„å¤©æ°”é¢„å‘Š'],
)
```

**æ ¸å¿ƒä»·å€¼**ï¼š
- **è¯­ä¹‰åŒ–æè¿°**ï¼šæ¸…æ™°å®šä¹‰Agentçš„å…·ä½“èƒ½åŠ›
- **ç¤ºä¾‹é©±åŠ¨**ï¼šé€šè¿‡exampleså¸®åŠ©å…¶ä»–Agentç†è§£ä½¿ç”¨æ–¹å¼
- **æ ‡ç­¾ç³»ç»Ÿ**ï¼šæ”¯æŒæŠ€èƒ½çš„åˆ†ç±»å’Œæ£€ç´¢

## ğŸ”§ æ ¸å¿ƒå®ç°æœºåˆ¶

### è¯·æ±‚å¤„ç†æµç¨‹

#### 1. æ¶ˆæ¯æ¥æ”¶ä¸è§£æ

æ ‡å‡†çš„A2Aè¯·æ±‚æ ¼å¼ï¼š

```json
{
    "id": "90320f73-d6be-462f-bf3d-020ab5043924",
    "jsonrpc": "2.0",
    "method": "message/send",
    "params": {
        "configuration": {
            "acceptedOutputModes": ["text", "text/plain", "image/png"]
        },
        "message": {
            "contextId": "f0b3fa91-b771-47c5-9ded-cd840e770d1b",
            "kind": "message",
            "messageId": "66675023-04aa-4584-8452-746f271f1c9a",
            "parts": [{
                "kind": "text",
                "text": "è¥¿é›…å›¾æ˜å¤©çš„å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"
            }],
            "role": "user"
        }
    }
}
```

**åè®®ç‰¹ç‚¹**ï¼š
- **JSON-RPC 2.0å…¼å®¹**ï¼šæ ‡å‡†åŒ–çš„RPCè°ƒç”¨æ ¼å¼
- **ä¸Šä¸‹æ–‡ç®¡ç†**ï¼šé€šè¿‡contextIdç»´æŠ¤ä¼šè¯çŠ¶æ€
- **é…ç½®é©±åŠ¨**ï¼šå®¢æˆ·ç«¯å¯æŒ‡å®šæœŸæœ›çš„è¾“å‡ºæ¨¡å¼

#### 2. è¯·æ±‚å¤„ç†å™¨ï¼šDefaultRequestHandler

```python
request_handler = DefaultRequestHandler(
    agent_executor=WeatherAgentExecutor(),    # è‡ªå®šä¹‰çš„ä¸šåŠ¡é€»è¾‘æ‰§è¡Œå™¨
    task_store=InMemoryTaskStore(),          # ä»»åŠ¡å­˜å‚¨å™¨ï¼Œç”¨äºç®¡ç†å¼‚æ­¥ä»»åŠ¡çŠ¶æ€
)
```

**ä»€ä¹ˆæ˜¯DefaultRequestHandlerï¼Ÿ**

DefaultRequestHandleræ˜¯A2Aåè®®SDKä¸­çš„æ ¸å¿ƒè¯·æ±‚å¤„ç†ç»„ä»¶ï¼Œå®ƒå……å½“äº†HTTPè¯·æ±‚ä¸Agentä¸šåŠ¡é€»è¾‘ä¹‹é—´çš„æ¡¥æ¢ã€‚å¯ä»¥ç†è§£ä¸ºä¼ ç»ŸWebå¼€å‘ä¸­çš„æ§åˆ¶å™¨ï¼ˆControllerï¼‰å±‚ï¼Œä½†ä¸“é—¨ä¸ºA2Aåè®®å’ŒAI Agentåœºæ™¯è¿›è¡Œäº†ä¼˜åŒ–ã€‚

**æ ¸å¿ƒèŒè´£è§£æ**ï¼š

**1. JSON-RPCåè®®å¤„ç†**
- **è¯·æ±‚è§£æ**ï¼šè‡ªåŠ¨è§£æç¬¦åˆJSON-RPC 2.0æ ‡å‡†çš„A2Aè¯·æ±‚
- **å‚æ•°éªŒè¯**ï¼šéªŒè¯è¯·æ±‚æ ¼å¼ã€å¿…éœ€å­—æ®µå’Œæ•°æ®ç±»å‹
- **é”™è¯¯å¤„ç†**ï¼šæ ‡å‡†åŒ–çš„é”™è¯¯å“åº”æ ¼å¼å’Œå¼‚å¸¸å¤„ç†æœºåˆ¶
- **å“åº”å°è£…**ï¼šå°†Agentæ‰§è¡Œç»“æœå°è£…ä¸ºæ ‡å‡†çš„JSON-RPCå“åº”

**2. è¯·æ±‚åˆ†å‘ä¸è·¯ç”±**
- **æ–¹æ³•è·¯ç”±**ï¼šæ ¹æ®JSON-RPCçš„methodå­—æ®µåˆ†å‘åˆ°å¯¹åº”çš„å¤„ç†é€»è¾‘
- **ä¸Šä¸‹æ–‡ç®¡ç†**ï¼šç»´æŠ¤è¯·æ±‚çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆcontextIdã€messageIdç­‰ï¼‰
- **ä¼šè¯çŠ¶æ€**ï¼šæ”¯æŒå¤šè½®å¯¹è¯çš„çŠ¶æ€ä¿æŒå’Œç®¡ç†
- **é…ç½®å¤„ç†**ï¼šå¤„ç†å®¢æˆ·ç«¯çš„é…ç½®å‚æ•°ï¼ˆå¦‚acceptedOutputModesï¼‰

**3. ä»»åŠ¡ç”Ÿå‘½å‘¨æœŸç®¡ç†**
- **ä»»åŠ¡åˆ›å»º**ï¼šä¸ºæ¯ä¸ªè¯·æ±‚åˆ›å»ºå”¯ä¸€çš„ä»»åŠ¡å®ä¾‹
- **çŠ¶æ€è·Ÿè¸ª**ï¼šé€šè¿‡TaskStoreç®¡ç†ä»»åŠ¡çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸ
- **å¼‚æ­¥æ”¯æŒ**ï¼šæ”¯æŒé•¿æ—¶é—´è¿è¡Œçš„AIæ¨ç†ä»»åŠ¡
- **ç»“æœç¼“å­˜**ï¼šå¯é€‰çš„ä»»åŠ¡ç»“æœç¼“å­˜æœºåˆ¶

**4. Agentæ‰§è¡Œå™¨é›†æˆ**
- **ä¸šåŠ¡é€»è¾‘å§”æ‰˜**ï¼šå°†å…·ä½“çš„ä¸šåŠ¡é€»è¾‘å§”æ‰˜ç»™AgentExecutorå¤„ç†
- **äº‹ä»¶é˜Ÿåˆ—ç®¡ç†**ï¼šç®¡ç†Agentæ‰§è¡Œè¿‡ç¨‹ä¸­çš„äº‹ä»¶æµ
- **æµå¼å“åº”**ï¼šæ”¯æŒå®æ—¶çš„æµå¼å“åº”è¾“å‡º
- **é”™è¯¯ä¼ æ’­**ï¼šå°†Agentæ‰§è¡Œä¸­çš„é”™è¯¯æ­£ç¡®ä¼ æ’­ç»™å®¢æˆ·ç«¯

**æŠ€æœ¯æ¶æ„ç‰¹ç‚¹**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   HTTPè¯·æ±‚      â”‚â”€â”€â”€â–¶â”‚ DefaultRequest   â”‚â”€â”€â”€â–¶â”‚ AgentExecutor   â”‚
â”‚  (JSON-RPC)     â”‚    â”‚    Handler       â”‚    â”‚  (ä¸šåŠ¡é€»è¾‘)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚                         â”‚
                              â–¼                         â–¼
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚  TaskStore   â”‚         â”‚ EventQueue  â”‚
                       â”‚  (çŠ¶æ€ç®¡ç†)   â”‚         â”‚ (äº‹ä»¶æµ)     â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¸ä¼ ç»ŸWebæ¡†æ¶å¯¹æ¯”**ï¼š

| ç‰¹æ€§ | ä¼ ç»ŸWebæ¡†æ¶ | DefaultRequestHandler |
|------|-------------|----------------------|
| åè®®æ”¯æŒ | HTTP REST | JSON-RPC 2.0 |
| çŠ¶æ€ç®¡ç† | æ— çŠ¶æ€ | ä»»åŠ¡çŠ¶æ€è·Ÿè¸ª |
| å¼‚æ­¥å¤„ç† | å¯é€‰ | åŸç”Ÿæ”¯æŒ |
| é”™è¯¯å¤„ç† | HTTPçŠ¶æ€ç  | JSON-RPCé”™è¯¯æ ¼å¼ |
| ä¸šåŠ¡é›†æˆ | ç›´æ¥å¤„ç† | å§”æ‰˜ç»™AgentExecutor |

**è®¾è®¡ä¼˜åŠ¿**ï¼š
- **æ ‡å‡†åŒ–**ï¼šå®Œå…¨ç¬¦åˆA2Aåè®®è§„èŒƒï¼Œç¡®ä¿äº’æ“ä½œæ€§
- **è§£è€¦åˆ**ï¼šå°†åè®®å¤„ç†ä¸ä¸šåŠ¡é€»è¾‘å®Œå…¨åˆ†ç¦»
- **å¯æ‰©å±•**ï¼šæ”¯æŒè‡ªå®šä¹‰TaskStoreå’Œä¸­é—´ä»¶æ‰©å±•
- **é«˜æ€§èƒ½**ï¼šå¼‚æ­¥å¤„ç†æ¶æ„ï¼Œæ”¯æŒé«˜å¹¶å‘åœºæ™¯
- **æ˜“æµ‹è¯•**ï¼šæ¸…æ™°çš„èŒè´£åˆ†ç¦»ï¼Œä¾¿äºå•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•

**å®é™…å·¥ä½œæµç¨‹**ï¼š
1. **æ¥æ”¶è¯·æ±‚**ï¼šä»A2AStarletteApplicationæ¥æ”¶HTTPè¯·æ±‚
2. **åè®®è§£æ**ï¼šè§£æJSON-RPCæ ¼å¼ï¼Œæå–æ–¹æ³•å’Œå‚æ•°
3. **ä»»åŠ¡åˆ›å»º**ï¼šåœ¨TaskStoreä¸­åˆ›å»ºæ–°çš„ä»»åŠ¡è®°å½•
4. **æ‰§è¡Œå§”æ‰˜**ï¼šè°ƒç”¨AgentExecutoræ‰§è¡Œå…·ä½“ä¸šåŠ¡é€»è¾‘
5. **çŠ¶æ€æ›´æ–°**ï¼šæ ¹æ®æ‰§è¡Œç»“æœæ›´æ–°ä»»åŠ¡çŠ¶æ€
6. **å“åº”è¿”å›**ï¼šå°†ç»“æœå°è£…ä¸ºæ ‡å‡†JSON-RPCå“åº”è¿”å›

#### 3. Agentæ‰§è¡Œå™¨ï¼šWeatherAgentExecutor

```python
class WeatherAgentExecutor(AgentExecutor):
    async def execute(
        self,
        context: RequestContext,
        event_queue: EventQueue,
    ) -> None:
        text = """æœªæ¥ 3 å¤©çš„å¤©æ°”å¦‚ä¸‹ï¼š
        1. æ˜å¤©ï¼ˆ2025å¹´6æœˆ1æ—¥ï¼‰ï¼šæ™´å¤©
        2. åå¤©ï¼ˆ2025å¹´6æœˆ2æ—¥ï¼‰ï¼šå°é›¨
        3. å¤§åå¤©ï¼ˆ2025å¹´6æœˆ3æ—¥ï¼‰ï¼šå¤§é›¨ã€‚"""
        
        event_queue.enqueue_event(
            completed_task(
                context.task_id,
                context.context_id,
                [new_artifact(parts=[Part(root=TextPart(text=text))], 
                             name="å¤©æ°”æŸ¥è¯¢ç»“æœ")],
                [context.message],
            )
        )
```

**è®¾è®¡æ¨¡å¼åˆ†æ**ï¼š
- **å¼‚æ­¥å¤„ç†**ï¼šä½¿ç”¨async/awaitæ”¯æŒé«˜å¹¶å‘
- **äº‹ä»¶é©±åŠ¨**ï¼šé€šè¿‡EventQueueå®ç°è§£è€¦
- **ä»»åŠ¡ç®¡ç†**ï¼šå®Œæ•´çš„ä»»åŠ¡ç”Ÿå‘½å‘¨æœŸç®¡ç†

#### 3. å“åº”æ ¼å¼æ ‡å‡†åŒ–

```json
{
    "id": "90320f73-d6be-462f-bf3d-020ab5043924",
    "jsonrpc": "2.0",
    "result": {
        "artifacts": [{
            "artifactId": "8401aa09-cb36-4d5c-8d75-ad8308d2c6c4",
            "name": "å¤©æ°”æŸ¥è¯¢ç»“æœ",
            "parts": [{
                "kind": "text",
                "text": "æœªæ¥ 3 å¤©çš„å¤©æ°”å¦‚ä¸‹ï¼š..."
            }]
        }],
        "contextId": "f0b3fa91-b771-47c5-9ded-cd840e770d1b",
        "history": [...],
        "id": "e3ee4048-afca-47a9-9ba4-7e2553726c20",
        "kind": "task",
        "status": {
            "state": "completed"
        }
    }
}
```

## ğŸš€ æŠ€æœ¯ä¼˜åŠ¿ä¸åˆ›æ–°ç‚¹

### 1. æ ‡å‡†åŒ–é€šä¿¡åè®®
- **äº’æ“ä½œæ€§**ï¼šä¸åŒå‚å•†çš„Agentå¯ä»¥æ— ç¼é€šä¿¡
- **å¯æ‰©å±•æ€§**ï¼šæ”¯æŒæ–°çš„æ¶ˆæ¯ç±»å‹å’Œèƒ½åŠ›æ‰©å±•
- **ç‰ˆæœ¬å…¼å®¹**ï¼šå‘åå…¼å®¹çš„åè®®æ¼”è¿›æœºåˆ¶

### 2. å£°æ˜å¼èƒ½åŠ›ç®¡ç†
- **è‡ªå‘ç°**ï¼šAgentå¯ä»¥åŠ¨æ€å‘ç°å…¶ä»–Agentçš„èƒ½åŠ›
- **æ™ºèƒ½è·¯ç”±**ï¼šåŸºäºæŠ€èƒ½åŒ¹é…çš„è¯·æ±‚è·¯ç”±
- **è´Ÿè½½å‡è¡¡**ï¼šæ”¯æŒå¤šå®ä¾‹Agentçš„è´Ÿè½½åˆ†å‘

### 3. å¼‚æ­¥ä»»åŠ¡å¤„ç†
- **é«˜å¹¶å‘**ï¼šæ”¯æŒå¤§é‡å¹¶å‘è¯·æ±‚å¤„ç†
- **é•¿ä»»åŠ¡æ”¯æŒ**ï¼šé€‚åˆAIæ¨ç†ç­‰è€—æ—¶æ“ä½œ
- **çŠ¶æ€ç®¡ç†**ï¼šå®Œæ•´çš„ä»»åŠ¡çŠ¶æ€è·Ÿè¸ª

## ğŸ” å®é™…åº”ç”¨åœºæ™¯

### 1. å¾®æœåŠ¡æ¶æ„ä¸­çš„AIæœåŠ¡
```
ç”¨æˆ·è¯·æ±‚ â†’ APIç½‘å…³ â†’ å¤©æ°”Agent â†’ å¤–éƒ¨å¤©æ°”API
                    â†“
                 æ ‡å‡†åŒ–å“åº”
```

### 2. å¤šAgentåä½œç³»ç»Ÿ
```
æ™ºèƒ½åŠ©æ‰‹ â†’ å¤©æ°”Agentï¼ˆè·å–å¤©æ°”ï¼‰
         â†’ æœºç¥¨Agentï¼ˆæŸ¥è¯¢èˆªç­ï¼‰
         â†’ é…’åº—Agentï¼ˆé¢„è®¢ä½å®¿ï¼‰
```

### 3. ä¼ä¸šçº§AIå¹³å°
- **Agentå¸‚åœº**ï¼šæ ‡å‡†åŒ–çš„Agentæ³¨å†Œå’Œå‘ç°
- **èƒ½åŠ›ç»„åˆ**ï¼šåŠ¨æ€ç»„åˆå¤šä¸ªAgentçš„èƒ½åŠ›
- **ç›‘æ§è¿ç»´**ï¼šç»Ÿä¸€çš„Agentç›‘æ§å’Œç®¡ç†

## ğŸ› ï¸ å¼€å‘å®è·µæŒ‡å—

### å¿«é€Ÿå¯åŠ¨

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd "A2Aåè®®æ·±åº¦è§£æ(1)/weather"

# 2. å®‰è£…ä¾èµ–
uv sync

# 3. å¯åŠ¨æœåŠ¡
uv run .
```

### æ‰©å±•å¼€å‘

1. **æ·»åŠ æ–°æŠ€èƒ½**ï¼š
```python
new_skill = AgentSkill(
    id='å®æ—¶å¤©æ°”',
    name='å®æ—¶å¤©æ°”æŸ¥è¯¢',
    description='è·å–æŒ‡å®šåœ°ç‚¹çš„å®æ—¶å¤©æ°”ä¿¡æ¯',
    tags=['å¤©æ°”', 'å®æ—¶'],
    examples=['åŒ—äº¬ç°åœ¨çš„å¤©æ°”å¦‚ä½•ï¼Ÿ'],
)
```

2. **é›†æˆå¤–éƒ¨API**ï¼š
```python
class WeatherAgentExecutor(AgentExecutor):
    async def execute(self, context, event_queue):
        # è°ƒç”¨çœŸå®çš„å¤©æ°”API
        weather_data = await self.fetch_weather_data(location)
        # å¤„ç†å“åº”...
```

3. **é”™è¯¯å¤„ç†**ï¼š
```python
async def cancel(self, request, event_queue):
    raise ServerError(error=UnsupportedOperationError())
```

## ğŸ”® æœªæ¥å‘å±•æ–¹å‘

### 1. åè®®æ¼”è¿›
- **å¤šæ¨¡æ€å¢å¼º**ï¼šæ”¯æŒæ›´ä¸°å¯Œçš„è¾“å…¥è¾“å‡ºç±»å‹
- **æµå¼å¤„ç†**ï¼šå®æ—¶æµå¼å“åº”èƒ½åŠ›
- **å®‰å…¨å¢å¼º**ï¼šèº«ä»½è®¤è¯å’Œæƒé™æ§åˆ¶

### 2. ç”Ÿæ€å»ºè®¾
- **Agentå¸‚åœº**ï¼šæ ‡å‡†åŒ–çš„Agentåˆ†å‘å¹³å°
- **å¼€å‘å·¥å…·**ï¼šå¯è§†åŒ–çš„Agentå¼€å‘å’Œè°ƒè¯•å·¥å…·
- **ç›‘æ§è¿ç»´**ï¼šä¼ä¸šçº§çš„Agentç®¡ç†å¹³å°

### 3. æŠ€æœ¯èåˆ
- **ä¸LLMæ·±åº¦é›†æˆ**ï¼šæ›´æ™ºèƒ½çš„Agentæ¨ç†èƒ½åŠ›
- **è¾¹ç¼˜è®¡ç®—æ”¯æŒ**ï¼šè½»é‡åŒ–çš„Agentè¿è¡Œæ—¶
- **åŒºå—é“¾é›†æˆ**ï¼šå»ä¸­å¿ƒåŒ–çš„Agentç½‘ç»œ

## ğŸ’¡ æ¶æ„è®¾è®¡çš„å®é™…ä»·å€¼

### DefaultRequestHandler + A2AStarletteApplication çš„åä½œä¼˜åŠ¿

é€šè¿‡å‰é¢çš„æ·±åº¦è§£æï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° `DefaultRequestHandler` å’Œ `A2AStarletteApplication` çš„åä½œè®¾è®¡ä½“ç°äº†ç°ä»£è½¯ä»¶æ¶æ„çš„æœ€ä½³å®è·µï¼š

**1. å…³æ³¨ç‚¹åˆ†ç¦»ï¼ˆSeparation of Concernsï¼‰**
```python
# æ¯ä¸ªç»„ä»¶éƒ½æœ‰æ˜ç¡®çš„èŒè´£è¾¹ç•Œ
server = A2AStarletteApplication(     # è´Ÿè´£HTTPæœåŠ¡å’Œè·¯ç”±
    agent_card=agent_card,           # è´Ÿè´£Agentèº«ä»½å£°æ˜
    http_handler=request_handler     # è´Ÿè´£åè®®å¤„ç†
)

request_handler = DefaultRequestHandler(
    agent_executor=executor,         # è´Ÿè´£ä¸šåŠ¡é€»è¾‘
    task_store=task_store           # è´Ÿè´£çŠ¶æ€ç®¡ç†
)
```

**2. ä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼‰**
- **æ¾è€¦åˆè®¾è®¡**ï¼šå„ç»„ä»¶é€šè¿‡æ¥å£äº¤äº’ï¼Œè€Œéç›´æ¥ä¾èµ–å…·ä½“å®ç°
- **æ˜“äºæµ‹è¯•**ï¼šå¯ä»¥è½»æ¾æ³¨å…¥Mockå¯¹è±¡è¿›è¡Œå•å…ƒæµ‹è¯•
- **çµæ´»é…ç½®**ï¼šå¯ä»¥æ ¹æ®ä¸åŒç¯å¢ƒæ³¨å…¥ä¸åŒçš„å®ç°

**3. å¼‚æ­¥ä¼˜å…ˆï¼ˆAsync-Firstï¼‰**
- **é«˜å¹¶å‘æ”¯æŒ**ï¼šåŸºäºASGIçš„å¼‚æ­¥æ¶æ„ï¼Œå¤©ç„¶æ”¯æŒé«˜å¹¶å‘åœºæ™¯
- **èµ„æºé«˜æ•ˆ**ï¼šé¿å…çº¿ç¨‹é˜»å¡ï¼Œæé«˜ç³»ç»Ÿèµ„æºåˆ©ç”¨ç‡
- **AIå‹å¥½**ï¼šç‰¹åˆ«é€‚åˆAIæ¨ç†ç­‰è€—æ—¶æ“ä½œçš„å¼‚æ­¥å¤„ç†

### å®é™…å¼€å‘ä¸­çš„æœ€ä½³å®è·µ

**1. è‡ªå®šä¹‰AgentExecutor**
```python
class CustomWeatherAgent(AgentExecutor):
    def __init__(self, weather_api_client):
        self.api_client = weather_api_client
    
    async def execute(self, context, event_queue):
        # å®é™…çš„å¤©æ°”APIè°ƒç”¨
        location = self.extract_location(context.message)
        weather_data = await self.api_client.get_weather(location)
        
        # æ ¼å¼åŒ–å“åº”
        formatted_response = self.format_weather_response(weather_data)
        
        # å‘é€ç»“æœ
        event_queue.enqueue_event(
            completed_task(
                context.task_id,
                context.context_id,
                [new_artifact(parts=[TextPart(text=formatted_response)])],
                [context.message]
            )
        )
```

**2. è‡ªå®šä¹‰TaskStore**
```python
class RedisTaskStore(TaskStore):
    """åŸºäºRedisçš„åˆ†å¸ƒå¼ä»»åŠ¡å­˜å‚¨"""
    def __init__(self, redis_client):
        self.redis = redis_client
    
    async def create_task(self, task):
        await self.redis.hset(f"task:{task.id}", mapping=task.to_dict())
    
    async def get_task(self, task_id):
        data = await self.redis.hgetall(f"task:{task_id}")
        return Task.from_dict(data) if data else None
```

**3. ä¸­é—´ä»¶æ‰©å±•**
```python
class AuthenticationMiddleware:
    """èº«ä»½è®¤è¯ä¸­é—´ä»¶"""
    async def __call__(self, request, call_next):
        # éªŒè¯APIå¯†é’¥
        api_key = request.headers.get("X-API-Key")
        if not self.validate_api_key(api_key):
            return JSONResponse({"error": "Unauthorized"}, status_code=401)
        
        response = await call_next(request)
        return response

# åº”ç”¨ä¸­é—´ä»¶
server.add_middleware(AuthenticationMiddleware)
```

### ä¼ä¸šçº§éƒ¨ç½²è€ƒè™‘

**1. å¯è§‚æµ‹æ€§ï¼ˆObservabilityï¼‰**
```python
import logging
from opentelemetry import trace

class ObservableAgentExecutor(AgentExecutor):
    def __init__(self):
        self.logger = logging.getLogger(__name__)
        self.tracer = trace.get_tracer(__name__)
    
    async def execute(self, context, event_queue):
        with self.tracer.start_as_current_span("agent_execution") as span:
            span.set_attribute("task_id", context.task_id)
            self.logger.info(f"å¼€å§‹æ‰§è¡Œä»»åŠ¡: {context.task_id}")
            
            try:
                # ä¸šåŠ¡é€»è¾‘æ‰§è¡Œ
                result = await self.process_request(context)
                span.set_attribute("status", "success")
                return result
            except Exception as e:
                span.set_attribute("status", "error")
                span.set_attribute("error_message", str(e))
                self.logger.error(f"ä»»åŠ¡æ‰§è¡Œå¤±è´¥: {e}")
                raise
```

**2. é…ç½®ç®¡ç†**
```python
from pydantic import BaseSettings

class AgentConfig(BaseSettings):
    host: str = "0.0.0.0"
    port: int = 8000
    log_level: str = "INFO"
    redis_url: str = "redis://localhost:6379"
    weather_api_key: str
    
    class Config:
        env_file = ".env"

config = AgentConfig()

# ä½¿ç”¨é…ç½®
server = A2AStarletteApplication(
    agent_card=create_agent_card(config),
    http_handler=create_request_handler(config)
)
```

**3. å¥åº·æ£€æŸ¥å’Œç›‘æ§**
```python
class HealthCheckHandler:
    def __init__(self, task_store, agent_executor):
        self.task_store = task_store
        self.agent_executor = agent_executor
    
    async def health_check(self):
        checks = {
            "task_store": await self.check_task_store(),
            "agent_executor": await self.check_agent_executor(),
            "external_apis": await self.check_external_dependencies()
        }
        
        all_healthy = all(checks.values())
        return {
            "status": "healthy" if all_healthy else "unhealthy",
            "checks": checks,
            "timestamp": datetime.utcnow().isoformat()
        }

# æ·»åŠ å¥åº·æ£€æŸ¥ç«¯ç‚¹
server.add_route("/health", health_check_handler.health_check)
```

### æ¶æ„æ¼”è¿›è·¯å¾„

**é˜¶æ®µ1ï¼šå•ä½“Agent**
- ä½¿ç”¨ `InMemoryTaskStore`
- ç®€å•çš„ `AgentExecutor` å®ç°
- åŸºç¡€çš„é”™è¯¯å¤„ç†

**é˜¶æ®µ2ï¼šç”Ÿäº§å°±ç»ª**
- åˆ‡æ¢åˆ°æŒä¹…åŒ–çš„ `TaskStore`ï¼ˆRedis/PostgreSQLï¼‰
- æ·»åŠ æ—¥å¿—ã€ç›‘æ§ã€å¥åº·æ£€æŸ¥
- å®ç°ä¼˜é›…å…³é—­å’Œé”™è¯¯æ¢å¤

**é˜¶æ®µ3ï¼šåˆ†å¸ƒå¼éƒ¨ç½²**
- å¤šå®ä¾‹è´Ÿè½½å‡è¡¡
- åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦
- è·¨Agenté€šä¿¡å’Œåä½œ

**é˜¶æ®µ4ï¼šä¼ä¸šçº§å¹³å°**
- Agentæ³¨å†Œä¸­å¿ƒ
- ç»Ÿä¸€çš„ç›‘æ§å’Œè¿ç»´å¹³å°
- è‡ªåŠ¨åŒ–çš„Agentå‘ç°å’Œè·¯ç”±

## ğŸ“ æ€»ç»“

A2Aåè®®ä½œä¸ºAgenté—´é€šä¿¡çš„æ ‡å‡†åŒ–è§£å†³æ–¹æ¡ˆï¼Œä¸ºæ„å»ºå¤§è§„æ¨¡åˆ†å¸ƒå¼AIç³»ç»Ÿæä¾›äº†åšå®çš„åŸºç¡€ã€‚é€šè¿‡æœ¬æ–‡çš„æ·±åº¦è§£æï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š

1. **æŠ€æœ¯æˆç†Ÿåº¦**ï¼šåŸºäºæˆç†Ÿçš„WebæŠ€æœ¯æ ˆï¼Œæ˜“äºç†è§£å’Œå®ç°
2. **è®¾è®¡ç†å¿µ**ï¼šå£°æ˜å¼ã€æ ‡å‡†åŒ–ã€å¯æ‰©å±•çš„æ¶æ„è®¾è®¡
3. **å®ç”¨ä»·å€¼**ï¼šè§£å†³äº†AI Agenté—´é€šä¿¡çš„æ ¸å¿ƒé—®é¢˜
4. **å‘å±•æ½œåŠ›**ï¼šä¸ºæœªæ¥çš„AIç”Ÿæ€å»ºè®¾å¥ å®šåŸºç¡€

éšç€AIæŠ€æœ¯çš„ä¸æ–­å‘å±•ï¼ŒA2Aåè®®å¿…å°†åœ¨æ„å»ºæ™ºèƒ½åŒ–ã€è‡ªåŠ¨åŒ–çš„æœªæ¥ç³»ç»Ÿä¸­å‘æŒ¥è¶Šæ¥è¶Šé‡è¦çš„ä½œç”¨ã€‚å¯¹äºAIå¼€å‘è€…è€Œè¨€ï¼Œæ·±å…¥ç†è§£å’ŒæŒæ¡A2Aåè®®ï¼Œå°†æ˜¯è¿ˆå‘ä¸‹ä¸€ä»£AIç³»ç»Ÿå¼€å‘çš„é‡è¦ä¸€æ­¥ã€‚

---

*æœ¬æ–‡åŸºäºVideoCodeé¡¹ç›®ä¸­çš„A2Aåè®®æ·±åº¦è§£æ(1)å®ç°ï¼Œæ›´å¤šæŠ€æœ¯ç»†èŠ‚è¯·å‚è€ƒé¡¹ç›®æºç ã€‚*